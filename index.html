<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formula</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
  </head>

  <body class="bg-dark">
    <div
      class="container-fluid d-flex justify-content-space vh-100 overflow-hidden px-0"
    >
      <div class="player-wrapper" id="split-player-formula">
        <iframe
          class="iframe"
          src="https://vk.com/video_ext.php?oid=-211941733&id=456239252&hash=f4396cec56858434"
          frameborder="0"
          allowfullscreen="1"
          allow="autoplay; encrypted-media; fullscreen; picture-in-picture"
        >
        </iframe>
      </div>
      <div
        class="twitch-wrapper d-flex flex-column pt-1 pb-1"
        id="split-twitch"
      >
        <div class="twitch-player-wrapper flex-fill" id="split-twitch-player">
          <!-- <iframe
            class="iframe"
            src="https://player.twitch.tv/?channel=melharucos&parent=vinnarde.github.io"
            frameborder="0"
            allowfullscreen="true"
            scrolling="no"
            height="100%"
            width="100%"
          >
          </iframe> -->
        </div>
        <div class="twitch-chat-wrapper flex-fill" id="split-twitch-chat">
          <!-- <iframe
            class="iframe"
            id="twitch-chat-embed"
            src="https://www.twitch.tv/embed/melharucos/chat?darkpopout&parent=vinnarde.github.io"
            height="100%"
            width="100%"
          >
          </iframe> -->
        </div>
      </div>
    </div>

    <!-- Load the Twitch embed script -->
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
  </body>

  <script>
    const playerSize = JSON.parse(
      localStorage.getItem("split-sizes-player")
    ) || [80, 20];
    const twitchSizes = JSON.parse(
      localStorage.getItem("split-sizes-twitch")
    ) || [20, 80];

    Split(["#split-player-formula", "#split-twitch"], {
      sizes: playerSize,
      minSize: [100, 100],
      gutterSize: 10,
      cursor: "col-resize",
      direction: "horizontal",
      onDragEnd: function (sizes) {
        localStorage.setItem("split-sizes-player", JSON.stringify(sizes));
      },
    });

    Split(["#split-twitch-player", "#split-twitch-chat"], {
      sizes: twitchSizes,
      minSize: [100, 100],
      gutterSize: 10,
      cursor: "row-resize",
      direction: "vertical",
      onDragEnd: function (sizes) {
        localStorage.setItem("split-sizes-twitch", JSON.stringify(sizes));
      },
    });

    let embed = new Twitch.Embed("split-twitch-player", {
      width: 854,
      height: 480,
      channel: "monstercat",
      layout: "video",
      autoplay: false,
      // Only needed if this page is going to be embedded on other websites
      // parent: ["embed.example.com", "othersite.example.com"]
    });

    embed.addEventListener(Twitch.Embed.VIDEO_READY, () => {
      const player = embed.getPlayer();
      player.play();
    });
  </script>
</html>
